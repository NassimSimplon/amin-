{"ast":null,"code":"import { fetchLogin } from \"../helpers/axios\";\nexport const LOGIN_REQUEST = 'LOGIN_REQUEST';\nexport const login = user => async dispatch => {\n  try {\n    dispatch({\n      type: 'LOGIN_SUCCESS',\n      payload: {\n        token,\n        user\n      }\n    });\n    const res = await fetchLogin(user);\n\n    if (res.status === 200) {\n      const {\n        token,\n        user\n      } = res.data;\n      localStorage.setItem('token', token);\n    }\n\n    dispatch({\n      type: LOGIN_REQUEST,\n      payload: { ...user\n      }\n    });\n    console.log(\"payload\");\n  } catch (error) {\n    console.log(error);\n  }\n};","map":{"version":3,"sources":["/home/nassim/Desktop/test-auth/client/src/actions/authactions.js"],"names":["fetchLogin","LOGIN_REQUEST","login","user","dispatch","type","payload","token","res","status","data","localStorage","setItem","console","log","error"],"mappings":"AAAA,SAAQA,UAAR,QAAyB,kBAAzB;AACA,OAAO,MAAMC,aAAa,GAAG,eAAtB;AAGP,OAAO,MAAMC,KAAK,GAAGC,IAAD,IAAS,MAAOC,QAAP,IAAmB;AAE5C,MAAG;AACCA,IAAAA,QAAQ,CAAC;AACLC,MAAAA,IAAI,EAAC,eADA;AAELC,MAAAA,OAAO,EAAC;AACJC,QAAAA,KADI;AACEJ,QAAAA;AADF;AAFH,KAAD,CAAR;AAMA,UAAMK,GAAG,GAAE,MAAMR,UAAU,CAAEG,IAAF,CAA3B;;AACA,QAAIK,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAuB;AACnB,YAAM;AAACF,QAAAA,KAAD;AAAOJ,QAAAA;AAAP,UAAeK,GAAG,CAACE,IAAzB;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA6BL,KAA7B;AAEH;;AACDH,IAAAA,QAAQ,CAAE;AACNC,MAAAA,IAAI,EAACJ,aADC;AAENK,MAAAA,OAAO,EAAC,EAAC,GAAIH;AAAL;AAFF,KAAF,CAAR;AAIAU,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACH,GAlBD,CAmBA,OAAOC,KAAP,EAAc;AACJF,IAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ;AACA;AACb,CAxBM","sourcesContent":["import {fetchLogin} from \"../helpers/axios\"\nexport const LOGIN_REQUEST = 'LOGIN_REQUEST'\n \n\nexport const login =(user)=> async (dispatch) =>{\n\n    try{\n        dispatch({\n            type:'LOGIN_SUCCESS',\n            payload:{\n                token,user\n            }\n        })\n        const res =await fetchLogin (user);\n        if (res.status === 200){\n            const {token,user} = res.data\n            localStorage.setItem('token',token)\n           \n        }\n        dispatch ({\n            type:LOGIN_REQUEST,\n            payload:{... user}\n        })\n        console.log(\"payload\")\n    }\n    catch (error) {\n              console.log(error);\n             }\n}\n"]},"metadata":{},"sourceType":"module"}